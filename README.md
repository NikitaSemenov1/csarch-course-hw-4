# ИДЗ №4 по АВС. Вариант №12, Семенов Никита БПИ214

## Условие задачи
###  Задача о гостинице - 1. 
> В гостинице **30** номеров, клиенты гостиницы
снимают номер на одни или несколько суток. Если в гостинице нет свободных номеров, клиенты не уходят, а устраиваются на рядом с гостиницей на
скамейках и ждут, пока любой номеров не освободится. **Создать многопоточное приложение, моделирующее работу гостиницы**.

## Отчет

Работа нацелена на 8 баллов. 

В отдельный модуль (`logic.cpp`) выделена выделена часть программы, реализующая непосредственно задачу.

Программа принимает на вход 4 параметра:
- `hotel_size` - количество номеров в гостинице;
- `threads_number` - количество запускаемых потоков (не менее 2);
- `wait_range` - максимальное время ожидания потока между генерацией гостей;
- `duration_range` - максимальное время проживания в гостинице.

Ограничений на параметры нет. Параметры - целые положительные числа. Количество потоков не меньше 2 из-за особенностей реализации.

Программа поддерживает 4 способа ввода параметров, передающихся через аргумент в коммандной строке:
- `-i` - ввод параметров и вывод логов происходит из консоли/в консоль;
- `-f <input-file> <output-file>`- ввод параметров происходит и вывод логов осуществляется из файлов/в в файлы;
- `-r` - параметры генереруются случайным образом. Вывод логов происходит в консоль;
- `-c <hotel_size> <threads_number> <wait_range> <duration_range>`- параметры передаются через командную строку.

Программа компилируется с помощью CMake

## 4 балла

- Использована модель параллельных вычислений **Производители и потребители**(*checkiner* и *checkouter*).

- Использованы критические секции выделены мьютексами. Количество гостей сверху ограницено семафором.

- Ограничения на входные данные описаны выше.

- Реализован ввод с консоли.

## 5 баллов

- Добавлены комментарии.

### Сценарий взаимодействия

Имеется контейнер (гостиница), которая имеет данную максимальую вместимость. Также есть элементы (гости), которые в произвольный момент пытаются его заполнить. Если в контейнер не полон (есть свободный номер), элемент вставляется в контейнер. Иначе он ждет, пока контейнер не осовободится. 

Каждый элемент имеют свою продолжительность жизни внутри контейнера (длительность проживания). По истечению этого времени элемент удалаяется из контейнера, и на его место можно поместить другой элемент.



## 6 баллов

- Реализован ввод параметров из командной строки.

### Реализуемый алгоритм

Имеются бесконечные функции `checkiner` и `checkouter` работающие в отдельных потоках.

Функции `checkiner` генерирует гостей и передает его в функцию `checkin`, которая пытается его заселить. 

Функция `checkouter` в единственном потоке итерируется по всем заселенным гостям и выселяет тех, чье время проживания закончилось, передавая их в функцию `checkout`. 


## 7 баллов

- Реализован ввод параметров из файлов и вывод логов в файлы.

- В папке `in` представлены различные конфигурации программы, а в папке `out` приведены соответствующие примеры работы.

- Аргументы командной строки расширены.

## 8 баллов 

- Реализована генерация параметров

- В папке `in` представлены различные конфигурации программы, а в папке `out` приведены соответствующие примеры работы.

- Аргументы командной строки расширены.